# QA Report: Crypto Bot Dashboard & APIs
**Date:** Wednesday, February 4, 2026
**Tester:** Antigravity (QA Manager Subagent)

## 1. API Endpoint Testing Results

| Endpoint | Method | Result | Notes |
| :--- | :--- | :--- | :--- |
| `/api/stats` | GET | ✅ PASS | Returns trade history, balance, win rate, and backlog. |
| `/api/chart` | GET | ✅ PASS | Returns OHLCV data with RSI and MA indicators. |
| `/api/trading/status` | GET | ✅ PASS | Returns current bot state, cycle count, and config. |
| `/api/trading/start` | POST | ✅ PASS | Successfully starts/restarts the trading loop. |
| `/api/trading/stop` | POST | ✅ PASS | Successfully stops the trading loop. |
| `/api/fear-greed` | GET | ✅ PASS | Returns Fear & Greed Index data. |

## 2. Technical Findings

### ✅ Correct Behaviors
- **API Connectivity:** All tested endpoints responded with `200 OK` and valid JSON.
- **Trading Control:** `POST /api/trading/stop` and `start` correctly toggle the `isRunning` state.
- **Data Enrichment:** `/api/stats` correctly fetches real-time prices from Binance for open positions to calculate unrealized PnL.

### ⚠️ Identified Issues (Bugs/Improvements)

1. **Stats Inconsistency (Major):**
   - The `/api/stats` endpoint and `/api/trading/status` endpoint report different statistical sets.
   - `/api/stats` uses `paper_state.json` (Trade Count: 47, Win Rate: 23.4%).
   - `/api/trading/status` uses `trades.db` via `TradeDB` (Trade Count: 323, Win Rate: 79.9%).
   - **Recommendation:** Unify data storage. The bot has migrated to SQLite (`trades.db`), but the stats API still reads from the legacy `paper_state.json` file.

2. **Trailing Stop Loss Data Loss:**
   - In `paper_state.json`, positions 57-62 show a `stopLoss` value around `3.4` (effectively near zero/invalid) while entry prices are `~100`.
   - This occurs when `trailingStopActive` is true, likely due to a logic error in the trailing stop calculation where it compares prices incorrectly or uses the wrong unit.

3. **Performance:**
   - `/api/stats` fetches prices from Binance on every request without caching. This could lead to rate limiting if the dashboard is refreshed frequently.

## 3. Conclusion
The crypto-bot dashboard is functional, but there is a significant **data split** between the legacy JSON state and the new SQLite database. The dashboard UI (via `/api/stats`) is currently showing outdated/incorrect performance metrics compared to the actual trading engine state.

---
*Report generated by OpenClaw QA Manager.*
